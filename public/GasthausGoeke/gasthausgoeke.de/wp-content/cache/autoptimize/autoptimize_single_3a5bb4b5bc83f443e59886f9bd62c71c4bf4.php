(function(){"use strict";const body=document.getElementsByTagName("body")[0];const site=document.querySelectorAll(".js-site")[0];const navigations=document.querySelectorAll(".js-navigation");const navigationTriggers=document.querySelectorAll(".js-navigation-trigger");const navigationClosers=document.querySelectorAll(".js-navigation-close");const navigationLinksAnchor=document.querySelectorAll(".js-navigation a[href*='#']");const navigationLinksAnchorEmpty=document.querySelectorAll(".js-navigation a[href='#']");let isNavigationOpen=false;let returnFocus;let touchstartX=0;let touchstartY=0;function forqyNavigationRelocate(element,location,target){const viewportWidth=window.innerWidth;const viewportBreakpoint=element.getAttribute("data-breakpoint")?element.getAttribute("data-breakpoint"):'1024';if(viewportWidth<viewportBreakpoint||body.classList.contains("navigation-mobile-enabled")){target.insertAdjacentElement("afterbegin",element);element.classList.add("relocated");}else{location.appendChild(element);element.classList.remove("relocated");}}
function forqyNavigationOpen(trigger,element){isNavigationOpen=true;const navigationID=element.getAttribute("data-navigation");returnFocus=document.activeElement;trigger.classList.add("expanded");trigger.setAttribute("aria-expanded","true");element.classList.add("active");body.classList.add("navigation-active");body.classList.add("navigation-active--"+navigationID);const closer=element.querySelector(".js-navigation-close");if(closer&&isNavigationOpen){Promise.resolve(1).then(function resolve(){closer.focus();});}
document.body.addEventListener("focus",(ev)=>{if(closer&&isNavigationOpen&&!ev.target.closest(".js-navigation[data-navigation="+navigationID+"]")){closer.focus();}},{capture:true});}
function forqyNavigationClose(element,focus=true){isNavigationOpen=false;const navigationID=element.getAttribute("data-navigation");const triggers=document.querySelectorAll(".js-navigation-trigger.expanded");triggers.forEach(function(trigger){Promise.resolve(1).then(function resolve(){trigger.classList.remove("expanded");trigger.setAttribute("aria-expanded","false");});});if(element.classList.contains("active")){element.classList.add("closing");setTimeout(function(){element.classList.remove("closing");element.classList.remove("active");},500);}
if(body.classList.contains("navigation-active")){body.classList.add("navigation-closing");setTimeout(function(){body.classList.remove("navigation-closing");body.classList.remove("navigation-active");body.classList.remove("navigation-active--"+navigationID);},500);}
window.requestAnimationFrame(()=>{if(focus){Promise.resolve(1).then(function resolve(){returnFocus.focus();});}});}
navigations.forEach(function(navigation){const container=navigation.closest(".js-navigation-container");forqyNavigationRelocate(navigation,container,site);window.addEventListener("resize",function(){forqyNavigationRelocate(navigation,container,site);});});navigationLinksAnchorEmpty.forEach(function(navigationLinkAnchorEmpty){navigationLinkAnchorEmpty.addEventListener("click",function(event){event.preventDefault();});});navigationTriggers.forEach(function(navigationTrigger){const navigationID=navigationTrigger.getAttribute("data-navigation");const navigationToOpen=document.querySelectorAll(".js-navigation[data-navigation="+navigationID+"]")[0];document.addEventListener("click",function(event){if(event.target&&event.target.matches(".js-navigation-trigger[data-navigation="+navigationID+"]")){event.preventDefault();forqyNavigationOpen(event.target,navigationToOpen);}});});navigationClosers.forEach(function(navigationCloser){const navigationsToClose=document.querySelectorAll(".js-navigation");navigationCloser.addEventListener("click",function(event){navigationsToClose.forEach(function(navigation){if(navigation.classList.contains("active")){event.preventDefault();forqyNavigationClose(navigation);}});});});navigationLinksAnchor.forEach(function(navigationLinkAnchor){navigationLinkAnchor.addEventListener("click",function(event){const navigation=this.closest(".js-navigation");forqyNavigationClose(navigation,false);});});document.addEventListener("keyup",function(event){const key=event.key;const navigationsToClose=document.querySelectorAll(".js-navigation");if(key==="Escape"||key==="Esc"){navigationsToClose.forEach(function(navigation){if(navigation.classList.contains("active")){forqyNavigationClose(navigation);}});}});navigations.forEach(function(navigation){navigation.addEventListener("touchstart",function(event){touchstartX=event.changedTouches[0].screenX;touchstartY=event.changedTouches[0].screenY;},{passive:true});navigation.addEventListener("touchend",function(event){const diffX=event.changedTouches[0].screenX-touchstartX;const diffY=event.changedTouches[0].screenY-touchstartY;const ratioX=Math.abs(diffX/diffY);const ratioY=Math.abs(diffY/diffX);const navigationID=this.getAttribute("data-navigation");const navigationsToClose=document.querySelectorAll(".js-navigation[data-navigation="+navigationID+"]");navigationsToClose.forEach(function(navigation){const navigationPosition=navigation.getAttribute("data-position");if(ratioX>ratioY){if(navigationPosition==="right"&&diffX>=0){forqyNavigationClose(navigation);}
if(navigationPosition==="left"&&diffX<=0){forqyNavigationClose(navigation);}}});},{passive:true});});}());